@model IEnumerable<Vidly_Web_Application.Models.User>
@using Vidly_Web_Application.Models
@{
    ViewBag.Title = "UserDashboard";
    int count = 0;

}

<h2>User Dashboard</h2>

<fieldset>

    @if (Session["Username"] != null || Session["UserEmail"] != null)
    {

        <text>Welcome: @Session["Name"].ToString()</text> <br />
        <text>User Email: @Session["UserEmail"].ToString()</text>
    }
</fieldset>
<br />
<!--/.span3-->
@if (@Session["UserRole"] == "admin" || @Session["UserRole"] == "hod")
{
    <div class="span9">
        <div class="content">
            <div class="btn-controls">
                <div class="btn-box-row row-fluid">
                    <a href="#" class="btn-box big span4">
                        <i class="icon-arrow-up"></i><b>0</b>
                        <p class="text-muted">
                            Regeister Lecturer
                        </p>
                    </a><a href="#" class="btn-box big span4">
                        <i class="icon-user"></i><b>15</b>
                        <p class="text-muted">Active Lecturers</p>
                    </a><a href="#" class="btn-box big span4">
                        <i class="icon-screenshot"></i><b>.</b>
                        <p class="text-muted">
                            View Report
                        </p>
                    </a>
                </div>
                <div class="btn-box-row row-fluid">
                    <div class="span8">
                        <div class="row-fluid">
                            <div class="span12">
                                <a href="#" class="btn-box small span4">
                                    <i class="icon-envelope"></i><b>Messages</b>
                                </a><a href="#" class="btn-box small span4">
                                    <i class="icon-group"></i><b>All Lecturers</b>
                                </a><a href="#" class="btn-box small span4">
                                    <i class="icon-exchange"></i><b>Expenses</b>
                                </a>
                            </div>
                        </div>
                        <div class="row-fluid">
                            <div class="span12">
                                <a href="#" class="btn-box small span4">
                                    <i class="icon-save"></i><b>Present Lecturers</b>
                                </a><a href="#" class="btn-box small span4">
                                    <i class="icon-bullhorn"></i><b>Tasks</b>
                                </a><a href="#" class="btn-box small span4"><i class="icon-edit"></i><b>Calendar</b> </a>
                            </div>
                        </div>
                    </div>
                    <ul class="widget widget-usage unstyled span4">
                        <li>
                            <p>
                                <strong>Department Attendance</strong>
                            </p>
                        </li>
                        <li>
                            <p>
                                <strong>Computer Science</strong> <span class="pull-right small muted">56%</span>
                            </p>
                            <div class="progress tight">
                                <div class="bar bar-success" style="width: 56%;">
                                </div>
                            </div>
                        </li>
                        <li>
                            <p>
                                <strong>Computer Systems</strong><span class="pull-right small muted">44%</span>
                            </p>
                            <div class="progress tight">
                                <div class="bar bar-warning" style="width: 44%;">
                                </div>
                            </div>
                        </li>
                        <li>
                            <p>
                                <strong>Networking</strong><span class="pull-right small muted">67%</span>
                            </p>
                            <div class="progress tight">
                                <div class="bar bar-danger" style="width: 10%;">
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <!--/#btn-controls-->
        </div>
        <!--/.content-->
    </div>
}
else
{
    <div class="span9">
        <div class="content">
            <div class="btn-controls">
                <div class="btn-box-row row-fluid">
                    <a href="/Users/Edit/?id=@Session["UserEmail"].ToString()" class="btn-box big span4">
                        <i class="icon-arrow-up"></i><b>Update</b>
                        <p class="text-muted">
                            User Profile
                        </p>
                    </a>
                    <a href="/Home/ActiveProfiles" class="btn-box big span4">
                        @foreach (User user in @Model)
                        {
                            count = count + 1;
                        }
                        <i class="icon-user"></i><b>@count</b>
                        <p class="text-muted">Active Lecturers</p>
                    </a>

                    <a href="/Home/SummaryReport/" class="btn-box big span4">
                        <i class="icon-screenshot"></i><b>View</b>
                        <p class="text-muted">
                            Summary Report
                        </p>
                    </a>
                </div>
                <div class="btn-box-row row-fluid">
                    <div class="span8">
                        <div class="row-fluid">
                            <div class="span12">
                                <a href="/VidlyMessages/Index" class="btn-box small span4">
                                    <i class="icon-envelope"></i><b>Messages</b>
                                </a><a href="/StaffMembers/Index" class="btn-box small span4">
                                    <i class="icon-group"></i><b>All Lecturers</b>
                                </a>
                                <a href="/Home/Construction" class="btn-box small span4">
                                    <i class="icon-save"></i><b>Present Lecturers</b>
                                </a>
                            </div>
                        </div>
                        @if (Session["UserRole"].ToString() == "admin")
                        {
                            <div class="row-fluid">
                                <div class="span12">
                                    <a href="/Schedules/Index" class="btn-box small span4">
                                        <i class="icon-exchange"></i><b>View Timetable</b>
                                    </a>

                                    <a href="/Subjects/Create" class="btn-box small span4">
                                        <i class="icon-edit"></i><b>Add Subjects</b>
                                    </a>
                                    <a href="/Departments/Index" class="btn-box small span4">
                                        <i class="icon-bullhorn"></i><b>Departments</b>
                                    </a>
                                </div>
                            </div>
                        }
                    </div>
                    <ul id="departmentAttendance" class="widget widget-usage unstyled span4">
                        <li>
                            <p>
                                <strong>Department Attendance</strong>
                            </p>
                        </li>
                        <li>
                            <p>
                                <strong>Computer Science</strong> <span class="pull-right small muted">56%</span>
                            </p>
                            <div class="progress tight">
                                <div class="bar bar-success" style="width: 56%;">
                                </div>
                            </div>
                        </li>
                        <li>
                            <p>
                                <strong>Computer Systems</strong><span class="pull-right small muted">44%</span>
                            </p>
                            <div class="progress tight">
                                <div class="bar bar-warning" style="width: 44%;">
                                </div>
                            </div>
                        </li>
                        <li>
                            <p>
                                <strong>Networking</strong><span class="pull-right small muted">67%</span>
                            </p>
                            <div class="progress tight">
                                <div class="bar bar-danger" style="width: 10%;">
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <!--/#btn-controls-->
        </div>
        <!--/.content-->
    </div>

}
@*<script>


         var departmentAttendance = document.getElementById('departmentAttendance');

        const userAction = async () => {
            const response = await fetch('http://localhost:1204/api/Staffs');
            const myJson = await response.json();

        }

    </script>*@

<script language="JavaScript" type="text/javascript" src="~/Scripts/jQuery.3.3.1/Content/Scripts/jquery-3.3.1.min.js"></script>
<script language="JavaScript" type="text/javascript" src="~/Scripts/jQuery.3.3.1/Content/Scripts/jquery-3.3.1.js"></script>

<script>
    $.getJSON('http://localhost:1204/api/Staffs', function (data) {

        var department_attendance = {
            name: 'COS',
            total: 15
        }

        for (var i = 0; i < data.length; i++) {

            
        }
    });

</script>


